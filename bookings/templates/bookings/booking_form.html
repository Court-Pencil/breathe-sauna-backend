{% extends "bookings/base.html" %}
{% load static %}


{% block content %}

<div class="booking-calendar">
    <!-- Calendar Header -->
    <div class="calendar-header">
        <div class="month-navigation">
            <button class="nav-button" id="prevMonth">‹</button>
            <span class="current-month" id="currentMonth"></span>
            <button class="nav-button" id="nextMonth">›</button>
        </div>
    </div>

    <!-- Calendar Grid -->
    <div class="calendar-grid">
        <div class="weekday">M</div>
        <div class="weekday">T</div>
        <div class="weekday">W</div>
        <div class="weekday">T</div>
        <div class="weekday">F</div>
        <div class="weekday">S</div>
        <div class="weekday">S</div>
        <!-- Days will be inserted by JavaScript -->
    </div>

    <!-- Time Slots Section -->
    <div class="time-slots-section" id="timeSlotsSection" style="display: none;">
        <div class="selected-date-header" id="selectedDateHeader"></div>
        <div class="timezone-info">TIME ZONE: LONDON (GMT)</div>
        <div class="time-slots-grid" id="timeSlotsGrid"></div>
        
        <!-- Hidden Form -->
        <form id="bookingForm" method="post" style="display: none;">
            {% csrf_token %}
            {{ form.as_p }}
        </form>
        
        <div class="booking-actions">
            <button type="button" class="btn-calendar btn-calendar-secondary" id="cancelBtn">Cancel</button>
            <button type="button" class="btn-calendar btn-calendar-primary" id="confirmBtn" disabled>Confirm Booking</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/booking-calendar.js' %}"></script>
<script>
    // Initialize calendar with Django data
    document.addEventListener('DOMContentLoaded', function() {
        const availableSlots = {{ available_slots_json|safe }};
        new BookingCalendar(availableSlots);
        console.log(availableSlots)
    });
</script>
{% endblock %}
